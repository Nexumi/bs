!function(){"use strict";let t=document.getElementsByClassName("lds")[0];window.apiShort=function(t){!function t(e){let i={method:"POST",body:JSON.stringify({url:e})};if(navigator.clipboard.write){let n=new ClipboardItem({"text/plain":fetch("https://api.short.jpkit.us/",i).then(i=>{if(409===i.status)t(e);else{if(200===i.status)return i.text();navigator.clipboard.writeText(e)}}).then(t=>new Blob([t],{type:"text/plain"}))});navigator.clipboard.write([n])}else fetch("https://api.short.jpkit.us/",i).then(i=>{if(409===i.status)t(e);else{if(200===i.status)return i.text();navigator.clipboard.writeText(e)}}).then(t=>{navigator.clipboard.writeText(t)})}(t)},window.apiExpandShort=function(t){!function t(e){let i=e.split("/");fetch(`https://api.short.jpkit.us?domain=${i[i.length-2]}&path=${i[i.length-1]}`).then(t=>{if(200===t.status)return t.text()}).then(t=>{parseURL(t)})}(t)};let e=t=>new Promise((e,i)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=i});window.apiReceipt=function(){e(document.getElementById("file").files[0]).then(i=>{t.classList.remove("hidden"),fetch("https://api.mindee.jpkit.us/",{method:"POST",body:JSON.stringify({document:i})}).then(t=>t.json()).then(e=>{scannedReceipt({products:(e=e.document.inference.prediction).line_items.map(({description:t,total_amount:e})=>({description:t,total:e})),tax:e.total_tax.value,tip:e.tip.value}),t.classList.add("hidden")}).catch(i=>{e(document.getElementById("file").files[0]).then(e=>{t.classList.remove("hidden"),fetch("https://api.veryfi.jpkit.us/",{method:"POST",body:JSON.stringify({file_data:e})}).then(t=>t.json()).then(e=>{scannedReceipt({products:e.line_items,tax:e.tax,tip:e.tip}),fetch("https://api.veryfi.jpkit.us/",{method:"DELETE",body:JSON.stringify({document_id:e.id})}).then(()=>{t.classList.add("hidden")})}).catch(e=>{alert("Receipt scanning failed.\nProbably hit the API limit for the month."),t.classList.add("hidden")})})})})}}();