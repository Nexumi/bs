!function(){"use strict";let t=document.getElementsByClassName("loading")[0].style;window.apiShort=function(t){!function t(e){let i={method:"POST",headers:{accept:"application/json","content-type":"application/json",Authorization:"pk_xLsSgvQrRoYzIoaJ"},body:JSON.stringify({domain:"short.jpkit.us",allowDuplicates:!1,originalURL:e,title:"Bill Splitter"})};if(navigator.clipboard.write){let n=new ClipboardItem({"text/plain":fetch("https://api.short.io/links/public",i).then(t=>t.json()).then(t=>new Blob([t.shortURL],{type:"text/plain"}))});navigator.clipboard.write([n])}else fetch("https://api.short.io/links/public",i).then(t=>{if(409!==t.status)return t.json();navigator.clipboard.writeText(e)}).then(t=>{navigator.clipboard.writeText(t.shortURL)})}(t)};let e=t=>new Promise((e,i)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=i});window.apiReceipt=function(){!function i(){let n=document.getElementById("file").files[0];if(!n)return;let a=new FormData;a.append("document",n,n.name);let o=new XMLHttpRequest;o.addEventListener("readystatechange",function(){if(4===this.readyState){let i=JSON.parse(this.responseText).document.inference.pages[0].prediction;scannedReceipt({products:i.line_items.map(({description:t,total_amount:e})=>({description:t,total:e})),tax:i.total_tax.value,tip:i.tip.value}),t.display="none"}403===this.status&&e(document.getElementById("file").files[0]).then(e=>{t.display="block",fetch("https://cors.jpkit.us/api.veryfi.com:443/api/v8/partner/documents",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","CLIENT-ID":"vrf3RKv7wWebzBAnxKswyCxNSFYOpt7LZzmMVo9",AUTHORIZATION:"apikey jimmypan13570:ddd03308776a64720449c2f5fce7f763"},body:JSON.stringify({file_data:e})}).then(t=>t.json()).then(e=>{scannedReceipt({products:e.line_items,tax:e.tax,tip:e.tip}),fetch(`https://cors.jpkit.us/api.veryfi.com:443/api/v8/partner/documents/${e.id}`,{method:"DELETE",headers:{Accept:"application/json","CLIENT-ID":"vrf3RKv7wWebzBAnxKswyCxNSFYOpt7LZzmMVo9",AUTHORIZATION:"apikey jimmypan13570:ddd03308776a64720449c2f5fce7f763"}}).then(()=>{t.display="none"})}).catch(e=>{alert("Receipt scanning failed.\nProbably hit the API limit for the month."),t.display="none"})})}),o.open("POST","https://api.mindee.net/v1/products/mindee/expense_receipts/v5/predict"),o.setRequestHeader("Authorization","Token cf7cbd9d801cc6a7564ee6c2de96072a"),t.display="block",o.send(a)}()}}();