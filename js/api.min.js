!function(){"use strict";let t=document.getElementsByClassName("lds")[0];window.apiShort=function(t){!function t(e){let i={method:"POST",body:JSON.stringify({url:e})};if(navigator.clipboard.write){let s=new ClipboardItem({"text/plain":fetch("https://api.short.jpkit.us/",i).then(i=>{if(409===i.status)t(e);else{if(200===i.status)return i.json();navigator.clipboard.writeText(e)}}).then(t=>new Blob([t.shortURL],{type:"text/plain"}))});navigator.clipboard.write([s])}else fetch("https://api.short.jpkit.us/",i).then(i=>{if(409===i.status)t(e);else{if(200===i.status)return i.json();navigator.clipboard.writeText(e)}}).then(t=>{navigator.clipboard.writeText(t.shortURL)})}(t)};let e=t=>new Promise((e,i)=>{let s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(s.result),s.onerror=i});window.apiReceipt=function(){e(document.getElementById("file").files[0]).then(i=>{t.classList.remove("hidden"),fetch("https://api.mindee.jpkit.us/",{method:"POST",body:JSON.stringify({document:i})}).then(t=>t.json()).then(e=>{scannedReceipt({products:(e=e.document.inference.prediction).line_items.map(({description:t,total_amount:e})=>({description:t,total:e})),tax:e.total_tax.value,tip:e.tip.value}),t.classList.add("hidden")}).catch(i=>{e(document.getElementById("file").files[0]).then(e=>{t.classList.remove("hidden"),fetch("https://api.veryfi.jpkit.us/",{method:"POST",body:JSON.stringify({file_data:e})}).then(t=>t.json()).then(e=>{scannedReceipt({products:e.line_items,tax:e.tax,tip:e.tip}),fetch("https://api.veryfi.jpkit.us/",{method:"DELETE",body:JSON.stringify({document_id:e.id})}).then(()=>{t.classList.add("hidden")})}).catch(e=>{alert("Receipt scanning failed.\nProbably hit the API limit for the month."),t.classList.add("hidden")})})})})}}();