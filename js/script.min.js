!function(){"use strict";function person(e,t,n){this.name=e,this.pritem=[[t,n]]}var column=document.getElementsByClassName("column"),names=column[0],prices=column[1],items=column[2],extra=document.getElementsByClassName("extra")[0],result=document.getElementsByClassName("result")[0],tax_mode="$",tip_mode="$";function getParams(){let urlParams=new URLSearchParams(window.location.search),params=["names","prices","items","extra"];for(var i=0;i<params.length;i++){var param=params[i];try{var get=eval(urlParams.get(param))}catch(tobe){continue}if(null!=get){var inputs=eval(param+".getElementsByTagName('input')");if("extra"==param)4==get.length?("%"==get[0]&&(tax_mode="%",inputs[0].style.display="none",inputs[2].style.display="inline-block"),inputs[1].value=get[1],"%"==get[2]&&(tip_mode="%",inputs[3].style.display="none",inputs[5].style.display="inline-block"),inputs[4].value=get[3]):(tax_mode="%",inputs[0].style.display="none",inputs[2].style.display="inline-block",inputs[1].value=get[0]||"",inputs[4].value=get[1]||"");else for(var j=0;j<get.length;j++)inputs[j].value=get[j],void 0==inputs[j+1]&&createInput()}}let legacyParams=["sitems","sprices","exclude"];for(var i=0;i<legacyParams.length;i++){var inputs,param=legacyParams[i];try{var get=eval(urlParams.get(param))}catch(tobe){continue}if(null!=get){switch(param){case"sitems":var count=(inputs=items.getElementsByTagName("input")).length,getLength=get.length;break;case"sprices":inputs=prices.getElementsByTagName("input");break;case"exclude":inputs=names.getElementsByTagName("input")}for(var j=0;j<getLength;j++)"exclude"==param&&(get[j]=invertExclude(get[j]||"")),inputs[count-1+j].value=get[j],void 0==inputs[count-1+j+1]&&createInput()}}}function share(){var link="?",yes=!1;let params=["names","prices","items","extra"];for(var i=0;i<params.length;i++){var makeParam,param=params[i],inputs=eval(param+".getElementsByTagName('input')");if("extra"==param)makeParam=[],"inline-block"==getComputedStyle(inputs[0]).display?makeParam.push("%27$%27"):makeParam.push("%27%%27"),makeParam.push("%27"+inputs[1].value+"%27"),"inline-block"==getComputedStyle(inputs[3]).display?makeParam.push("%27$%27"):makeParam.push("%27%%27"),makeParam.push("%27"+inputs[4].value+"%27");else{makeParam=[];for(var j=0;j<inputs.length;j++)makeParam.push("%27"+inputs[j].value.replaceAll(" ","%20")+"%27")}if("extra"!=param)for(var j=makeParam.length-1;j>=0;j--)if("%27%27"==makeParam[j])makeParam.pop();else break;if(makeParam.length)yes?link+="&":yes=!0,!("extra"==param&&["%27$%27","%27%27","%27$%27","%27%27"].every((e,t)=>e==makeParam[t]))&&(link+=param+"=%5B"+makeParam+"%5D")}link=1==link.length?"":link,link=window.location.origin+window.location.pathname+link,navigator.clipboard.writeText(link)}function createInput(){var e=document.createElement("input");e.setAttribute("type","text"),names.appendChild(e),(e=document.createElement("input")).setAttribute("type","text"),prices.appendChild(e),(e=document.createElement("input")).setAttribute("type","text"),items.appendChild(e)}function destroyInput(e=nameInputs.length-1){var t=names.getElementsByTagName("input"),n=prices.getElementsByTagName("input"),l=items.getElementsByTagName("input");t[e].remove(),n[e].remove(),l[e].remove()}function deleteHbr(){for(var e=1;e<=6;e++)for(var t=result.getElementsByTagName("h"+e),n=t.length,l=0;l<n;l++)t[0].remove();for(var a=result.getElementsByTagName("br"),i=a.length,e=0;e<i;e++)a[0].remove()}function peopleFind(e,t){for(var n=0;n<e.length;n++)if(e[n].name==t)return n;return -1}function itemFind(e,t){for(var n=0;n<e.length;n++)if(e[n][1]==t)return n;return -1}function invertExclude(e){(e=e.split(", ")).push("");for(var t=names.getElementsByTagName("input"),n=[],l=0;l<t.length;l++)t[l].value.includes(", ")||e.includes(t[l].value)||n.push(t[l].value);return n.join(", ")}function peopleCreate(){for(var peep=[],nameInputs=names.getElementsByTagName("input"),priceInputs=prices.getElementsByTagName("input"),itemInputs=items.getElementsByTagName("input"),i=0;i<nameInputs.length;i++)try{var name=nameInputs[i].value.replace(",",", ").replace(/\s+/g," ").trim(),price=priceInputs[i].value.replace(/\s+/g," ").trim(),item=itemInputs[i].value.replace(/\s+/g," ").trim();if(nameInputs[i]!=document.activeElement&&(nameInputs[i].value=name),priceInputs[i]!=document.activeElement&&(priceInputs[i].value=price),itemInputs[i]!=document.activeElement&&(itemInputs[i].value=item),price=eval(price),"number"==typeof price&&(price=Number(price.toFixed(2))),!isNaN(price)){priceInputs[i]!=document.activeElement&&(priceInputs[i].value=price);for(var splitNames=name.split(", "),j=0;j<splitNames.length;j++){var find=peopleFind(peep,splitNames[j]);if(-1!=find){var pritem=peep[find].pritem,pfit=itemFind(pritem,item+(splitNames.length>1?" [Split]":""));-1!=pfit?pritem[pfit][0]+=price/splitNames.length:pritem.push([price/splitNames.length,item+(splitNames.length>1?" [Split]":"")])}else{var persun=new person(splitNames[j],price/splitNames.length,item+(splitNames.length>1?" [Split]":""));peep.push(persun)}}}}catch(ignore){}for(var i=0;i<nameInputs.length-1;)nameInputs[i].value.length||nameInputs[i]==document.activeElement||priceInputs[i].value.length||priceInputs[i]==document.activeElement||itemInputs[i].value.length||itemInputs[i]==document.activeElement?i++:destroyInput(i);return(nameInputs[nameInputs.length-1].value.length||priceInputs[priceInputs.length-1].value.length||itemInputs[itemInputs.length-1].value.length)&&createInput(),peep}function costH(peep){var tax,tip,ex=extra.getElementsByTagName("input");try{tax=eval(ex[1].value),"number"==typeof tax&&("$"==tax_mode&&(tax=Number(tax.toFixed(2))),document.activeElement!=ex[1]&&(ex[1].value=tax)),"%"==tax_mode&&(tax/=100)}catch(what){tax=NaN}try{tip=eval(ex[4].value),"number"==typeof tip&&("$"==tip_mode&&(tip=Number(tip.toFixed(2))),document.activeElement!=ex[4]&&(ex[4].value=tip)),"%"==tip_mode&&(tip/=100)}catch(what){tip=NaN}for(var subtotal=0,i=0;i<peep.length;i++)for(var pricy=peep[i].pritem,j=0;j<pricy.length;j++){var price=pricy[j][0];isNaN(price)||(subtotal+=price)}tax=tax||0,"%"==tax_mode&&(tax*=subtotal),tip=tip||0,"%"==tip_mode&&(tip*=subtotal);var total=subtotal+tax,trueTotal=total+tip,h3=extra.getElementsByTagName("h3");h3[0].innerText="Subtotal: $"+subtotal.toFixed(2),h3[2].innerText="Total: $"+total.toFixed(2),h3[4].innerText="True Total: $"+trueTotal.toFixed(2)}function individualH(peep){var tax,tip,ex=extra.getElementsByTagName("input"),ext=extra.getElementsByTagName("h3");try{tax=eval(ex[1].value)||0,"%"==tax_mode&&(tax/=100)}catch(what){tax=0}try{tip=eval(ex[4].value)||0,"%"==tip_mode&&(tip/=100)}catch(what){tip=0}"$"==tax_mode&&(tax/=ext[0].innerText.slice(11)),"$"==tip_mode&&(tip/=ext[0].innerText.slice(11));for(var i=0;i<peep.length;i++)if(peep[i].name){for(var price=0,pricy=peep[i].pritem,j=0;j<pricy.length;j++){var subprice=pricy[j][0];isNaN(subprice)||(price+=subprice)}var h3=document.createElement("h3");h3.innerText=peep[i].name+": $"+(price+price*tax+price*tip).toFixed(2),result.appendChild(h3);var h5=document.createElement("h5");h5.innerText="  Tax: $"+(price*tax).toFixed(2),result.appendChild(h5);var h5=document.createElement("h5");h5.innerText="  Tip: $"+(price*tip).toFixed(2),result.appendChild(h5);for(var j=0;j<pricy.length;j++){var subitem=pricy[j];!isNaN(subitem[0])&&subitem[1].length&&((h5=document.createElement("h5")).innerText="  "+subitem[1]+": $"+subitem[0].toFixed(2),result.appendChild(h5))}}}function calculate(){deleteHbr();var e=peopleCreate();costH(e),individualH(e)}function setButtonEventListners(){var e=document.getElementById("tax_dollar"),t=document.getElementById("tax_percent"),n=document.getElementById("tip_dollar"),l=document.getElementById("tip_percent");e.addEventListener("click",function(){tax_mode="%",e.style.display="none",t.style.display="inline-block"}),t.addEventListener("click",function(){tax_mode="$",t.style.display="none",e.style.display="inline-block"}),n.addEventListener("click",function(){tip_mode="%",n.style.display="none",l.style.display="inline-block"}),l.addEventListener("click",function(){tip_mode="$",l.style.display="none",n.style.display="inline-block"})}function setEventListeners(){document.getElementById("share").addEventListener("click",share),document.addEventListener("focusout",calculate),document.addEventListener("input",calculate),setButtonEventListners()}createInput(),getParams(),setEventListeners(),calculate()}();